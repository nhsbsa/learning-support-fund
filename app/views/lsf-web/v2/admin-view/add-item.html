<!DOCTYPE HTML>
<html lang="en" id="adminTheme" class="html-admin">

<head>
  <meta http-equiv="X-UA-Compatible" content="IE=EDGE" />
  <title>Manage knowledge base</title>
  <link href="/css/old-admin-view.css"  rel="stylesheet">
</head>

<body class="nhs-bsa">
  <div id="skiplink-container">
    <div>
      <a href="#adminContent" class="skiplink">Skip to main content</a>
    </div>
  </div>
  <header class="with-proposition" id="global-header" role="banner">
    <div class="header-wrapper">
      <div class="header-proposition">
        <div class="content">
          <nav id="proposition-menu">
            <a href="/lsf/admin/menu">
              <img class="header-logo" src="/images/nhslogo.png" alt="NHS Business Services Authority">
            </a>
            <div class="user-menu">
              <p style="float: right;">
                Signed in as user.lastname7@user.com (<a id="signOut" href="#">Sign out</a>)
              </p>
            </div>
          </nav>
        </div>
      </div>
    </div>
  </header>

  <nav class="side-nav dft-sidebar" role="navigation" aria-label="Navigation">
    <ul role="list">
      <li class="side-nav__item"><a id="studentSearchButton" href="#">Student search</a></li>
      <li class="side-nav__item"><a id="manageUsersButton" href="#">Manage users</a></li>
      <li class="side-nav__item"><a id="manageCollegesButton" href="#">Manage universities</a></li>
      <li class="side-nav__item"><a id="manageCoursesButton" href="#">Manage courses</a></li>
      <li class="side-nav__item"><a id="manageRatesButton" href="#">Manage rates</a></li>
      <li class="side-nav__item"><a id="manageTermPaymentPercentsButton" href="#">Manage term payment percentages</a></li>
      <li class="side-nav__item active"><a id="manageKnowledgeBaseButton" href="/lsf-web/v2/admin-view/knowledge-base">Manage knowledge base</a></li>
      <li class="side-nav__item"><a id="manageEnrolmentYearsButton" href="#">Manage enrolment year</a></li>
      <li class="side-nav__item"><a id="manageCosaButton" href="#">Manage attendance status</a>
      </li>
      <li class="side-nav__item"><a id="manageNoteTypes" href="#">Manage note types</a>
      </li>
      <li class="side-nav__item"><a id="manageFormsButton" href="#">Manage forms</a></li>
      <li class="side-nav__item"><a id="managePaymentRunButton" href="#">Manage payment runs</a></li>
      <li class="side-nav__item"><a id="invalidBankDetailsButton" href="#">Invalid bank details</a></li>
      <li class="side-nav__item"><a id="reportMenuButton" href="#">Reporting menu</a></li>
      <li class="side-nav__item"><a id="accessibility-statement" href="#">Accessibility</a></li>
    </ul>
  </nav>

  <main class="elements-index" id="adminContent" role="main">
    <div class="content-wrapper">
      <div class="admin-page-header">
        <div class="grid-row">
          <div class="column-full">
            <div class="phase-banner">
              <p>
                <strong class="phase-tag" style="float: left;">ALPHA</strong><span style="float: left;">This is a new service</span>
              </p>
            </div>
          </div>
        </div>
        <a class="link-back" href="/lsf-web/v2/admin-view/knowledge-base" id="backButton">Back</a>
      </div>
      <div class="grid-row">
        <div class="column-two-thirds">
          <form action="/lsf-web/v2/admin-view/preview-item" method="POST">
            <h1 class="heading-large mt-0">Add knowledge item</h1>
  
            <div class="form-group">
              <label class="form-label-bold" for="title">Title</label> 
              <input class="form-control" type="text" maxlength="100" id="title" name="title" value=""> 
            </div>
  
            <div class="form-group">
              <label for="textContent" class="form-label-bold" id="content-label">Content (optional)</label>
            
              <textarea style="width: 100%" class="form-control" rows="8" id="textContent" maxlength="1000" aria-labelledby="content-label" name="content"></textarea>
              <div id="charactersRemaining">1000 characters remaining</div>
            </div>
          
            <div id="linkContainer">
              <div class="form-group">
                <label class="form-label-bold" for="link1">Link 1 (optional)</label> 
                <input class="form-control" type="text" id="link1" name="title" value=""> 
              </div>
              <div class="form-group">
                <label class="form-label-bold" for="link2">Link 2 (optional)</label> 
                <input class="form-control" type="text" id="link2" name="title" value=""> 
              </div>
              <div class="form-group">
                <label class="form-label-bold" for="link3">Link 3 (optional)</label> 
                <input class="form-control" type="text" id="link3" name="title" value=""> 
              </div>
            </div>

            <!-- If we want to dynamically add link inputs -->
            <!-- <div id="container"></div> -->
            <!-- <script>
              const container = document.getElementById("container");
              const addDivLink = document.getElementById("add-div-link");
              const label = document.querySelector(".form-label-bold");
              const input = document.querySelector(".form-control");

              let counter = 2;

              addDivLink.addEventListener("click", () => {
                // Create new div element
                const newDiv = document.createElement("div");
                newDiv.setAttribute('class', 'form-group');

                // Clone label element and update for attribute
                const newLabel = label.cloneNode(true);
                newLabel.setAttribute("for", "link" + counter);
                newLabel.innerHTML = "Link " + counter + " (optional)";

                // Clone input element and update id attribute
                const newInput = input.cloneNode(true);
                newInput.setAttribute("id", "link" + counter);

                // Add cloned label and input to the new div element
                newDiv.appendChild(newLabel);
                newDiv.appendChild(newInput);

                // Add the new div element to the container
                container.appendChild(newDiv);

                // Increment the counter for the next iteration
                counter++;
              });
            </script> -->
          
            <div class="form-group">
              <div class="multiple-choice">
                <input type="checkbox" id="enabled" name="enabled" value="true">
                <label for="enabled" class="form-label">Enabled</label> 
              </div>
            </div>
  
            <div class="form-group">
              <button class="button" id="submit-button" type="submit" value="Save" name="Save" role="button">Preview</button>
              
            </div>

            <div class="form-group">
              <a href="/lsf-web/v2/admin-view/knowledge-base">Cancel</a>
            </div>
    
          </form>
        </div>
      </div>
    </div>
  </main>
</body>
<style>
  textarea#content:focus{
    outline: 3px solid #ffbf47;
  }
</style>
<script src="/js/jquery-3.5.1.min.js"></script>
<script type="text/javascript">
  $(function() {
    el = document.getElementById('content');
    el.addEventListener('keyup', countCharacters, true);
    countCharacters();
  });

  //Function which counts characters remaining for note comments textarea                                               
  function countCharacters() {
    var textEntered, countRemaining, counter;
    textEntered = document.getElementById('content').value;

    var newLines = textEntered.match(/(\r\n|\n|\r)/g);
    var addition = 0;
    if (newLines != null) {
      addition = newLines.length;
    }

    var max = 1000 - addition;

    counter = (max - textEntered.length);
    if (counter < 0) {
      document.getElementById('content').value = textEntered
          .substring(0, max);
      counter = 0;
    }
    countRemaining = document.getElementById('charactersRemaining');
    countRemaining.textContent = (counter + ' characters remaining');

  }
</script>
<script>
  const inputFields = [
    document.getElementById('title'),
    document.getElementById('link1'),
    document.getElementById('link2'),
    document.getElementById('link3'),
    document.getElementById('textContent')
  ];
  const submitButton = document.getElementById('submit-button');

  submitButton.addEventListener('click', () => {
    const enteredData = [];
    for (let i = 0; i < inputFields.length; i++) {
      enteredData.push(inputFields[i].value);
      localStorage.setItem(`enteredData-${i}`, inputFields[i].value);
    }
    localStorage.setItem('enteredData', JSON.stringify(enteredData));
  });
</script>
</html>