{% extends 'layout-custom-header.html' %}

{% block pageTitle %}
Claim checks
{% endblock %}

{% block content %}
<div class="nhsuk-grid-row">

  <div class="nhsuk-grid-column-two-thirds">
    {% if data['read-only'] === 'true' %}
      {{ backLink({
        "href": "javascript:history.go(-1)",
        "text": "Go back"
      }) }}
    {% endif %}

    <h1 class="nhsuk-heading-l"><span class="nhsuk-caption-l nhsuk-caption--bottom">Travel and Dual Accommodation Expenses</span>
      Claim checks
    </h1>

    <!-- <div class="nhsuk-inset-text">
      <span class="nhsuk-u-visually-hidden">Information: </span>
      <ul class="nhsuk-list nhsuk-list--bullet">
        <li>Student name: Amari Ansari</li>
        <li>Activity number: 1411</li>
      </ul>
    </div> -->

    {% if data['read-only'] != 'true' %}
    <h2 class="nhsuk-heading-s nhsuk-u-margin-bottom-2">{{ data['name'] }} ({{ data['activity number'] }}) claim checks incomplete</h2>
    <p class="nhsuk-body nhsuk-u-margin-bottom-7">You have completed {% if data['status'] === 'Returned from NHSBSA' %}1{% else %}0{% endif %} of 4 sections.</p>
    {% endif %}

    {% if data['status'] == 'University processing' %}
    <h2 class="nhsuk-heading-s nhsuk-u-margin-bottom-7">Claim currently being processed by Samuel Jackson</h2>
    {% endif %}

    {% if data['Bloggs'] === 'returned'%}
    <div class="nhsuk-card nhsuk-card--care nhsuk-card--care--non-urgent">
      <div class="nhsuk-card--care__heading-container">
        <h2 class="nhsuk-card--care__heading">
          <span role="text">Claim feedback</span>
        </h2>
        <span class="nhsuk-card--care__arrow" aria-hidden="true"></span>
      </div>
      <div class="nhsuk-card__content">

        <table class="nhsuk-table-responsive">
          <thead role="rowgroup" class="nhsuk-table__head">
            <tr role="row">
              <th role="columnheader" class="" scope="col">
                From
              </th>
              <th role="columnheader" class="" scope="col">
                Date
              </th>
              <th role="columnheader" class="" scope="col">
                Feedback
              </th>
            </tr>
          </thead>
          <tbody class="nhsuk-table__body">
            <tr role="row" class="nhsuk-table__row">
              <td class="nhsuk-table__cell">Catherine S (NHSBSA)</td>
              <td class="nhsuk-table__cell">03 January 2023</td>
              <td class="nhsuk-table__cell "><strong>Evidence is incorrect</strong><br>Evidence has not been provided for Thursday and Friday</td>
            </tr>
          </tbody>
        </table>

      </div>
    </div>
    {% endif %}
    {% if data['status'] === 'Rejected' %}
    <div class="nhsuk-warning-callout">
      <h3 class="nhsuk-warning-callout__label">
        <span role="text">
          <span class="nhsuk-u-visually-hidden">Important: </span>
          Claim submitted late
        </span>
      </h3>
      <p>The student submitted their claim over 6 months after their placement dates.</p>
    </div>
    <details class="nhsuk-details nhsuk-expander nhsuk-u-margin-top-0">
      <summary class="nhsuk-details__summary">
        <span class="nhsuk-details__summary-text">
          Claim feedback and history
        </span>
      </summary>
      <div class="nhsuk-details__text">

        <table class="nhsuk-table-responsive">
          <thead role="rowgroup" class="nhsuk-table__head">
            <tr role="row">
              <th role="columnheader" class="" scope="col">
                From
              </th>
              <th role="columnheader" class="" scope="col">
                Date
              </th>
              <th role="columnheader" class="" scope="col">
                Feedback
              </th>
            </tr>
          </thead>
          <tbody class="nhsuk-table__body">
            <tr role="row" class="nhsuk-table__row">
              <td class="nhsuk-table__cell">Tracy Mack (NHSBSA)</td>
              <td class="nhsuk-table__cell">30 November 2022</td>
              <td class="nhsuk-table__cell ">Claim declined due to late submission and no adequate exception given.</td>
            </tr>
            <tr role="row" class="nhsuk-table__row">
              <td class="nhsuk-table__cell">Mark Thompson (University)</td>
              <td class="nhsuk-table__cell">26 November 2022</td>
              <td class="nhsuk-table__cell ">Claim approved despite late submission.</td>
            </tr>
            <tr role="row" class="nhsuk-table__row">
              <td class="nhsuk-table__cell">Ben Bloggs (Student)</td>
              <td class="nhsuk-table__cell">22 November 2022</td>
              <td class="nhsuk-table__cell ">Sorry for submitting it late I forgot about this placement.</td>
            </tr>
          </tbody>
        </table>

      </div>
    </details>
    {% endif %}
    {% if data['status'] === 'Returned to student' %}
    <div class="nhsuk-card nhsuk-card--care nhsuk-card--care--non-urgent">
      <div class="nhsuk-card--care__heading-container">
        <h2 class="nhsuk-card--care__heading">
          <span role="text">Claim feedback</span>
        </h2>
        <span class="nhsuk-card--care__arrow" aria-hidden="true"></span>
      </div>
      <div class="nhsuk-card__content">

        <table class="nhsuk-table-responsive">
          <thead role="rowgroup" class="nhsuk-table__head">
            <tr role="row">
              <th role="columnheader" class="" scope="col">
                From
              </th>
              <th role="columnheader" class="" scope="col">
                Date
              </th>
              <th role="columnheader" class="" scope="col">
                Feedback
              </th>
            </tr>
          </thead>
          <tbody class="nhsuk-table__body">
            <tr role="row" class="nhsuk-table__row">
              <td class="nhsuk-table__cell">University</td>
              <td class="nhsuk-table__cell">11 October 2022</td>
              <td class="nhsuk-table__cell "><strong>Evidence is incorrect</strong><br>You need to add a receipt of your parking ticket for us to accept the additional cost.</td>
            </tr>
            <tr role="row" class="nhsuk-table__row">
              <td class="nhsuk-table__cell">NHSBSA</td>
              <td class="nhsuk-table__cell">9 October 2022</td>
              <td class="nhsuk-table__cell "><strong>Evidence is incorrect</strong><br>Evidence of Parking ticket is missing. Return to University.</td>
            </tr>
          </tbody>
        </table>

      </div>
    </div>
    {% endif %}

  </div>
</div>

<div class="nhsuk-grid-row">

  <div class="nhsuk-grid-column-two-thirds">

    <ol class="app-task-list">
      <li>
        <h2 class="app-task-list__section">
          <span class="app-task-list__section-number">1. </span> Travel details
        </h2>
        <ul class="app-task-list__items">
          <li class="app-task-list__item nhsuk-u-clear">
            <span class="app-task-list__task-name">
              <a href="TDAE-student-university-details" aria-describedby="eligibility-status">
                Check university travel details
              </a>
            </span>
            {% if data['university-completed'] === 'completed' %}
              <strong class="nhsuk-tag" style="float: right;" id="eligibility-status">Completed</strong>
            {% elif data['university-completed'] === 'in-progress' %}
              <strong class="nhsuk-tag nhsuk-tag--yellow" style="float: right;" id="eligibility-status">Return to student</strong>
            {% else %}
              <strong class="nhsuk-tag nhsuk-tag--white" style="float: right;" id="eligibility-status">Not started</strong>
            {% endif %}
          </li>
          <li class="app-task-list__item nhsuk-u-clear">
            <span class="app-task-list__task-name">
              <a href="TDAE-claim-evidence" aria-describedby="eligibility-status">
                Check placement travel details
              </a>
            </span>
            {% if data['evidence-completed'] === 'completed' %}
              <strong class="nhsuk-tag" style="float: right;" id="eligibility-status">Completed</strong>
            {% elif data['evidence-completed'] === 'in-progress' %}
              <strong class="nhsuk-tag nhsuk-tag--yellow" style="float: right;" id="eligibility-status">Return to student</strong>
            {% else %}
              <strong class="nhsuk-tag nhsuk-tag--white" style="float: right;" id="eligibility-status">Not started</strong>
            {% endif %}
          </li>
        </ul>
      </li>

      <li>
        <h2 class="app-task-list__section">
          <span class="app-task-list__section-number">2. </span> Accommodation details
        </h2>
        <ul class="app-task-list__items">
          <li class="app-task-list__item nhsuk-u-clear">
            <span class="app-task-list__task-name">
              <a href="TDAE-accommodation" aria-describedby="eligibility-status">
                Check accommodation details
              </a>
            </span>
            {% if data['accommodation-completed'] === 'completed' %}
              <strong class="nhsuk-tag" style="float: right;" id="eligibility-status">Completed</strong>
            {% elif data['accommodation-completed'] === 'in-progress' %}
              <strong class="nhsuk-tag nhsuk-tag--yellow" style="float: right;" id="eligibility-status">Return to student</strong>
            {% else %}
              <strong class="nhsuk-tag nhsuk-tag--white" style="float: right;" id="eligibility-status">Not started</strong>
            {% endif %}
          </li>
        </ul>
      </li>
      <li>
        <h2 class="app-task-list__section">
          <span class="app-task-list__section-number">3. </span> Authorisation details
        </h2>
        <ul class="app-task-list__items">
          <li class="app-task-list__item nhsuk-u-clear">
            <span class="app-task-list__task-name">
              <a href="TDAE-authoriser-details" aria-describedby="eligibility-status">
                Check Authoriser details
              </a>
            </span>
            {% if data['hei-completed'] === 'completed' %}
              <strong class="nhsuk-tag" style="float: right;" id="eligibility-status">Completed</strong>
            {% elif data['hei-completed'] === 'in-progress' %}
              <strong class="nhsuk-tag nhsuk-tag--yellow" style="float: right;" id="eligibility-status">Return to University</strong>
            {% else %}
              <strong class="nhsuk-tag nhsuk-tag--white" style="float: right;" id="eligibility-status">Not started</strong>
            {% endif %}
          </li>
        </ul>
      </li>
      {% if data['read-only'] != 'true' %}
      <li>
        <h2 class="app-task-list__section">
          <span class="app-task-list__section-number">4. </span> Finish checking claim
        </h2>
        <ul class="app-task-list__items">
          <li class="app-task-list__item nhsuk-u-clear">
            <span class="app-task-list__task-name">
              {% if data['university-completed'] === 'completed' and data['evidence-completed'] === 'completed' and data['hei-completed'] === 'completed'%}
              <a class="app-task-list__task-name" href="TDAE-claim-summary">
                Authorise payment
              </a>
              {% else %}
              <span class="app-task-list__task-name">
                Authorise payment
              </span>
              {% endif %}
            </span>
            {% if data['university-completed'] === 'completed' and data['evidence-completed'] === 'completed' %}
              {% if data['approve-in-progress'] === 'in-progress' %}
                <strong class="nhsuk-tag nhsuk-tag--yellow" style="float: right;" id="eligibility-status">Return to University</strong>
              {% elif data['approve-in-progress'] === 'completed' %}
                <strong class="nhsuk-tag" style="float: right;" id="eligibility-status">Completed</strong>
              {% else %}
                <strong class="nhsuk-tag nhsuk-tag--white" style="float: right;" id="eligibility-status">Not started</strong>
              {% endif %}
            {% else %}
              <strong class="nhsuk-tag nhsuk-tag--grey" style="float: right;" id="eligibility-status">Cannot start yet</strong>
            {% endif %}
          </li>
        </ul>
      </li>
      {% endif %}
    </ol>

    {% if data['read-only'] != 'true' %}
    <h2 class="nhsuk-heading-m">Return to University</h2>
    <p>If there are any issues with the claim you can send it back to the University either explaining:</p>
    <ul>
      <li>what the student needs to change for them to re-submit the claim</li>
      <li>why the claim is being declined</li>
    </ul>
    {% if data['university-completed'] === 'in-progress' or data['evidence-completed'] === 'in-progress' or data['hei-completed'] === 'in-progress' %}
    <a class="nhsuk-button" href="TDAE-return-decline">Send to University</a>
    {% else %}
    <a class="nhsuk-button nhsuk-button--secondary" href="TDAE-return-decline">Send to University</a>
    {% endif %}
    {% endif %}

  </div>

</div>
{% endblock %}
